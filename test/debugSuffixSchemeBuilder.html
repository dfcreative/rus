<!DOCTYPE html>

<meta charset="utf-8">
<title>Debug</title>

<script src="../rus.dev.js"></script>

<script src="../src/RadixTrei.js"></script>
<script src="../src/endingSchemeBuilder.js"></script>


<script type="text/javascript">
	var source = rus.patronimics;
	/*var source = [
		//"александровский": "александровского александровскому александровский александровским александровском",
		//"михайловский": "михайловского михайловскому михайловский михайловским михайлоском",
		
		//level competition
		"Онуфрий Онуфриевич Онуфриевна",
		"Георгий Георгиевич Георгиевна",
		"Арий Ариевич|Арьевич Ариевна|Арьевна",
		"Афанасий Афанасиевич|Афанасьевич Афанасиевна|Афанасьевна",
		"Власий Власиевич|Власьевич Власиевна|Власьевна",
		"Кандидий Кандидиевич|Кандидьевич Кандидиевна|Кандидьевна",
	
		//level interference
		"Авдей Авдеевич Авдеевна",
		"Авдий Авдиевич Авдиевна",
		"Федотий Федотиевич|Федотьевич Федотиевна|Федотьевна",
		"Флорентий Флорентиевич|Флорентьевич Флорентиевна|Флорентьевна",

		//full form closing
		//besides, there is a case where the longer word has been included to a shorter group, when the shorter word can’t specify itself more than the longer group. In that case - add word boundary to specify shorten word
		"Милий Милиевич Милиевна",
		"Эмилий Эмилиевич|Эмильевич Эмилиевна|Эмильевна"
	]*/

	console.log("Source", source.length)
	
	//lower case
	toLowerCaseDict(source);


	var suffixes = getEndingScheme(source, 0);
	var genSuffixes = generalizeScheme(suffixes, source, rus);

	testCorrectness(suffixes, source, rus, 0);
	console.log("qty: " + estimateQuality(getEndingScheme, source, rus, 0));

	testCorrectness(genSuffixes, source, rus);
	console.log("qty: " + estimateQuality(function(source, num){ return generalizeScheme(getEndingScheme(source, num), source, rus) }, source, rus, 0));

	//render json
	/*var pfs = Object.getOwnPropertyNames(genSuffixes).sort(function(a,b){return b.length - a.length});
	var res = "{\n";
	for (var i = 0; i < pfs.length; i++){
		res += "\"" + pfs[i] + "\": \"" + genSuffixes[pfs[i]] + "\"" + ",\n"
	}
	res = res.slice(0, -2) + "\n}"
	console.log(res*/
</script>